---
title: FileModuleç›®å½•
date: 2021-12-14 18:15:59
permalink: /pages/779a6e/
article: false
---

[ğŸ‘‰ æºç ](https://github.com/Geniusay/ChopperBot)

[[toc]]

## FileCache

::: tip è¯´æ˜
ç”±äºChopperBotä¸­ä½¿ç”¨äº†å¤§é‡çš„Jsonæ–‡ä»¶æ¥ä¿å­˜é…ç½®æˆ–æ•°æ®ï¼Œè€Œæœ‰äº›Jsonæ–‡ä»¶å¯èƒ½ä¼šè¢«é¢‘ç¹çš„æ“ä½œï¼Œ
è€ŒFileCacheå°±æ˜¯ç”¨æ¥è§£å†³æ–‡ä»¶çš„é¢‘ç¹å†™å…¥é€ æˆçš„IOé—®é¢˜ï¼ŒFileCacheå…·å¤‡äº†ç®€å•çš„æ–‡ä»¶æ“ä½œåŠŸèƒ½ï¼Œæ–‡ä»¶ç¼“å­˜æ± ï¼Œæ–‡ä»¶åˆ·å…¥ï¼Œæ–‡ä»¶å®šæ—¶åˆ·å…¥ï¼Œæ–‡ä»¶ç‰ˆæœ¬å¯¹ç…§åŠŸèƒ½ï¼Œ
æ–¹ä¾¿å¼€å‘äººå‘˜å¯¹æ–‡ä»¶çš„æ“ä½œä¸ç®¡ç†ã€‚
:::

æ›´å¤šè¯¦æƒ…è¯·ç§»æ­¥è‡³ [FileCache](/pages/779a6c/) æŸ¥çœ‹ã€‚


## FileUtil
::: tip è¯´æ˜
æ–‡ä»¶çš„æ“ä½œå·¥å…·ç±»
:::
| æ–¹æ³•åç§° | æ–¹æ³•è¯´æ˜ | å‚æ•°æè¿° | è¿”å›å†…å®¹ |
| :-: | :-: | :-: | :-: |
| isFileExist| åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ | dir(String) æ–‡ä»¶è·¯å¾„ | boolean |
| copyFile | å¤åˆ¶æ–‡ä»¶ | srcPath(String) æºæ–‡ä»¶è·¯å¾„,destPath(String) ç›®æ ‡æ–‡ä»¶è·¯å¾„ | File |
| deleteFile | åˆ é™¤æ–‡ä»¶ | path(String) æ–‡ä»¶æ ¹è·¯å¾„, filename(String) æ–‡ä»¶åç§° | boolean|
| deleteFile | åˆ é™¤æ–‡ä»¶ | path(String) æ–‡ä»¶è·¯å¾„| boolean |
| deleteDirectory | åˆ é™¤æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¤¹å†…å®¹<br/>  (æ’é™¤rootæ–‡ä»¶å’ŒC:) | path(String) æ–‡ä»¶è·¯å¾„ | boolean |
| deleteDirectory | åˆ é™¤æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¤¹å†…å®¹ | path(String) æ–‡ä»¶è·¯å¾„<br/> visit è®¿é—®æ–‡ä»¶æ—¶è§¦å‘è¯¥æ–¹æ³•<br/>   preVisit è®¿é—®å­ç›®å½•å‰è§¦å‘è¯¥æ–¹æ³•<br/>   postVisit è®¿é—®ç›®å½•ä¹‹åè§¦å‘è¯¥æ–¹æ³•<br/>   | boolean |
```java
public void testDelete() throws IOException {
        FileUtil.deleteDirectory("E:\\Project\\ChopperBot\\FileModule\\src\\main\\resources\\trash");
}
```

- `æ›´å¤šä¾‹å­å¯æŸ¥çœ‹teståŒ…ä¸‹é¢çš„samples`
- [FileUtilTest](https://github.com/Geniusay/ChopperBot/blob/master/FileModule/src/test/java/org/example/util/FileUtilTest.java)
## JsonFileUtil
::: tip è¯´æ˜
Jsonæ–‡ä»¶çš„æ“ä½œå·¥å…·ç±»
:::
| æ–¹æ³•åç§° | æ–¹æ³•è¯´æ˜ | å‚æ•°æè¿° | è¿”å›å†…å®¹ |
| :-: | :-: | :-: | :-: |
| readJsonFile | è¯»å–jsonæ–‡ä»¶ | filePath(String) æ–‡ä»¶æ ¹è·¯å¾„</br> fileName(String) æ–‡ä»¶å</br>| Map |
| readJsonFile | è¯»å–jsonæ–‡ä»¶ | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br> | Map |
| readJsonFileToJSONObject | è¯»å–jsonæ–‡ä»¶å¹¶è¿”å›jsonå¯¹è±¡ | filePath(String) æ–‡ä»¶æ ¹è·¯å¾„</br> fileName(String) æ–‡ä»¶å</br>| JsonObject |
| readJsonFileToJSONObject | è¯»å–jsonæ–‡ä»¶å¹¶è¿”å›jsonå¯¹è±¡ | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br>| JsonObject |
| readJsonFileToObject | è¯»å–jsonæ–‡ä»¶å¹¶è¿”å›å¯¹è±¡ | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br> clazz(Class) è¿”å›ç±»å‹| Tæ³›å‹ |
| writeJsonFile | å†™å…¥jsonæ–‡ä»¶ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º | filePath(String) æ–‡ä»¶è·¯å¾„</br> fileName(String) æ–‡ä»¶å</br> data(Map) å†…å®¹| File |
| writeJsonFile | å†™å…¥jsonæ–‡ä»¶ï¼Œä¸å­˜åœ¨åˆ™è‡ªåŠ¨åˆ›å»º | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br> data(Map) å†…å®¹ | File |
| writeJsonFileIsExist | å†™å…¥jsonæ–‡ä»¶,ä¸å­˜åœ¨åˆ™è¿”å›null | filePath(String) æ–‡ä»¶è·¯å¾„</br> fileName(String) æ–‡ä»¶å</br> data(Map) å†…å®¹| File |
| writeJsonFileIsExist | å†™å…¥jsonæ–‡ä»¶,ä¸å­˜åœ¨åˆ™è¿”å›null | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br> data(Map) å†…å®¹ | File |
| writeBigJsonFile | å†™å…¥å¤§jsonæ–‡ä»¶ | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br> data(Map) å†…å®¹ | File |
| writeBigJsonFile | å†™å…¥å¤§jsonæ–‡ä»¶ | fullPath(String) å…¨æ–‡ä»¶è·¯å¾„</br> Objs(List) å†…å®¹ | File |
```java
public void writeClassInJsonFile() {
        Student student = new Student(
        "Genius",
        18,
        "HUST",
        "CS",
        List.of("Coding", "Reading", "Playing"),
        Map.of("QQ", "123456789", "WeChat", "987654321")
        );
        JsonFileUtil.writeJsonFile("E:\\Project\\ChopperBot\\FileModule\\src\\main\\resources\\", "student.json", student);
        JsonFileUtil.writeBigJsonFile("E:\\Project\\ChopperBot\\FileModule\\src\\main\\resources\\student2.json", List.of(student));
        JsonFileUtil.writeJsonFileIsExist("E:\\Project\\ChopperBot\\FileModule\\src\\main\\resources\\student3.json", student);

        System.out.println(JsonFileUtil.readJsonFileToObject("E:\\Project\\ChopperBot\\FileModule\\src\\main\\resources\\student.json", Student.class));
        System.out.println(JsonFileUtil.readJsonFileToObject("E:\\Project\\ChopperBot\\FileModule\\src\\main\\resources\\student2.json",List.class));
}
```

- `æ›´å¤šä¾‹å­å¯æŸ¥çœ‹teståŒ…ä¸‹é¢çš„samples`
- [JsonFileUtilTest](https://github.com/Geniusay/ChopperBot/blob/master/FileModule/src/test/java/org/example/util/JsonFileUtilTest.java)
